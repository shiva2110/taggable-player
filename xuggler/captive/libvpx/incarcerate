#!/bin/sh
# libvpx/incarcerate.  Generated from incarcerate.in by configure.

# Modify this script to pass the necessary parameters to 
# the configure of the captive package you're configuring

prefix="/usr/local"
exec_prefix="${prefix}"
VPX_OPTIONS=
LDFLAGS="-arch x86_64 "
CFLAGS="-arch x86_64 -g -O2"
YASM=""
HOST_TYPE=Mac
HOST_OS=x86_64-apple-darwin11.4.2
VS_DEBUG=

if [ "" = "1" -o "${HOST_TYPE}" = "Mac" ]; then
  case ${HOST_OS} in
    *darwin*)
      case ${HOST_OS} in
        *ppc64*|*powerpc64*)
        VPX_HOST=ppc64-darwin10-gcc
        ;;
        *ppc*|*powerpc*)
        VPX_HOST=ppc32-darwin10-gcc
        ;;
        *x86_64*|*amd64*)
        VPX_HOST=x86_64-darwin10-gcc
        ;;
        *)
        VPX_OPTIONS="$VPX_OPTIONS --disable-mmx --disable-sse --disable-sse2 --disable-sse3 --disable-ssse3 --disable-sse4_1"
        VPX_HOST=x86-darwin10-gcc
        ;;
      esac
    ;;
    *mingw*|*cygwin*)
      case ${HOST_OS} in
        *x86_64*|*amd64*)
        VPX_HOST=x86_64-win64-gcc
        ;;
        *)
        VPX_HOST=x86-win32-gcc
        ;;
      esac
    ;;
    *linux*)
      VPX_OPTIONS="$VPX_OPTIONS --enable-pic"
      case ${HOST_OS} in
        *x86_64*|*amd64*)
        VPX_HOST=generic-gnu
        ;;
        *)
        VPX_HOST=x86-linux-gcc
        ;;
      esac
    ;;
    *)
      VPX_OPTIONS="$VPX_OPTIONS --enable-pic"
      case ${HOST_OS} in
        *x86_64*|*amd64*)
        VPX_HOST=generic-gnu
        ;;
        *)
        VPX_HOST=generic-gnu
        ;;
      esac
    ;;
  esac
  VPX_OPTIONS="${VPX_OPTIONS} --target=${VPX_HOST}"
else
  VPX_OPTIONS="$VPX_OPTIONS --enable-pic"
fi
# Tell VPX about the captive libraries already built and fake
# installed

# shared support on vpx is limited at best
VPX_OPTIONS="$VPX_OPTIONS --disable-shared --enable-runtime-cpu-detect"

if test ! "x$VS_DEBUG" = "x"; then
  echo "Creating debug version of libvpx: $VS_DEBUG"
  VPX_OPTIONS="$VPX_OPTIONS --enable-debug"
  VPX_OPTIONS="$VPX_OPTIONS --disable-optimizations"
else
  echo "Creating release version of libvpx: $VS_DEBUG"
fi

echo "Configuring VPX with these options: $VPX_OPTIONS"
CROSS="" \
LDFLAGS="-L/projects/workrepo/xuggle-xuggler/captive/stage${exec_prefix}/lib -arch x86_64 " \
ASFLAGS="" \
PATH="$PATH:/projects/workrepo/xuggle-xuggler/captive${exec_prefix}/bin@" bash /projects/workrepo/xuggle-xuggler/captive/libvpx/csrc/configure \
  --extra-cflags="$CFLAGS -I'/projects/workrepo/xuggle-xuggler/captive/stage${prefix}/include'" \
  --prefix="${prefix}" $VPX_OPTIONS || \
  (echo "Could not configure library: \"/projects/workrepo/xuggle-xuggler/captive/libvpx\"; you may want to try disabling it or installing your own version" && exit 1)
